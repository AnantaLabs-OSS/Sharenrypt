(function(){"use strict";self.addEventListener("message",async p=>{const{type:a,payload:y}=p.data;try{if(a==="encrypt"){const{chunk:e,key:s,iv:t}=y,c=await self.crypto.subtle.encrypt({name:"AES-GCM",iv:t},s,e);self.postMessage({type:"encrypt-success",payload:{encrypted:c}})}else if(a==="decrypt"){const{chunk:e,key:s,iv:t}=y,c=await self.crypto.subtle.decrypt({name:"AES-GCM",iv:t},s,e);self.postMessage({type:"decrypt-success",payload:{decrypted:c}})}}catch(e){self.postMessage({type:"error",payload:{error:e}})}})})();
